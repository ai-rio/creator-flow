# Amazon Q Developer Rules for CreatorFlow

## Project Context

**CreatorFlow** is a TikTok Shop fulfillment automation platform that scales creators from 50 to 500+ orders per day without operational headaches. Built with Next.js 15, React, TypeScript, and Supabase.

## Core Technologies

- **Framework**: Next.js 15 with App Router, React 19, TypeScript 5.7+
- **Database**: Supabase (PostgreSQL) with RLS, Edge Functions
- **Payments**: Stripe integration with webhooks
- **UI**: Tailwind CSS, Radix UI, Shadcn/ui components
- **Testing**: Jest (unit), Playwright (E2E)
- **Analytics**: PostHog, Vercel Analytics
- **Package Manager**: Bun

## Development Standards

### Code Quality
1. **TypeScript First**: All code must be properly typed
2. **ESLint Compliance**: Follow project ESLint configuration
3. **Component Architecture**: Use Shadcn/ui patterns and Radix UI primitives
   - **See**: `src/components/CLAUDE.md` for component-specific guidelines
   - **MCP Integration**: Always use `mcp__shadcn-ui-v4__get_component` before UI work
   - Follow creator-focused UI patterns for TikTok Shop integration
4. **Error Handling**: Implement proper error boundaries and try-catch blocks
5. **Security First**: Never commit secrets, always use environment variables

### Documentation Standards

1. **Follow Documentation Standards**: All docs follow [Project Documentation Standards](./docs/development/documentation-standards/DOCUMENTATION_STANDARDS.md)
2. **Four-category structure**: Use 00-planning/, 01-specifications/, 02-implementation/, 03-reports/
3. **Proper naming convention**: P###/S###/I###-DRAFT/R###-DRAFT format
4. **No root-level documentation**: All docs in appropriate `docs/` subdirectories
5. **DRAFT prefixes required**: Implementation and Report docs use DRAFT prefix until approved
6. **MoSCoW Methodology**: All documentation and feature planning must follow MoSCoW prioritization framework

### File Naming Conventions

- **Components**: PascalCase (`OrderList.tsx`)
- **Utilities**: camelCase (`formatOrderStatus.ts`)
- **API Routes**: lowercase with hyphens (`api/tiktok-orders/route.ts`)
- **Types**: PascalCase with descriptive names (`TikTokOrder.ts`)

### Error Handling Patterns

- Use **ActionResponse<T>** for consistent server action returns
- Implement proper **null checking** before object access
- Create **type guards** for union type disambiguation
- Log errors appropriately without exposing sensitive data

### File Structure
```
src/
├── app/                 # Next.js App Router pages & API routes
├── components/          # Reusable UI components
├── features/           # Feature-specific modules
├── lib/                # Utilities, clients, helpers
└── types/              # TypeScript type definitions
```

## Business Context

- **Target Market**: TikTok Shop creators scaling from 50 to 500+ orders per day
- **Business Model**: $49-$199/month usage-based SaaS subscriptions
- **Revenue Target**: $10M ARR (8,333 customers × $100 average MRR)
- **Value Proposition**: Eliminate operational bottlenecks for viral TikTok products

## **CRITICAL Documentation Rules for AI Agents**

### **MANDATORY Documentation Rules**
1. **MANDATORY**: Follow [Project Documentation Standards](./docs/development/documentation-standards/DOCUMENTATION_STANDARDS.md) for ALL documentation
2. **NEVER** create documentation files in project root
3. **NEVER** claim implementation is "COMPLETE" without user validation
4. **ALWAYS** use four-category structure: 00-planning/, 01-specifications/, 02-implementation/, 03-reports/
5. **ALWAYS** use P###/S###/I###-DRAFT-/R###-DRAFT- naming convention
6. **ALWAYS** place docs in `docs/development/[initiative]/[category]/` structure

### **Prohibited Documentation Practices**

❌ Creating `IMPLEMENTATION_COMPLETE.md` in root
❌ Creating `PHASE_X_SUMMARY.md` without user approval
❌ Claiming completion before user testing
❌ Root-level status files
❌ Final reports before validation

### **Required Documentation Practices**

✅ `docs/development/[initiative]/02-implementation/I001-DRAFT-implementation-progress.md`
✅ `docs/development/[initiative]/01-specifications/S001-technical-requirements.md`
✅ `docs/development/[initiative]/00-planning/P001-investigation-findings.md`
✅ Wait for user validation before removing `DRAFT-` prefix

## **MoSCoW Methodology Requirements**

**MANDATORY**: All feature planning and documentation MUST follow MoSCoW prioritization:

### **Must Have (M)** - Critical, Non-negotiable Requirements
- Core TikTok Shop order processing and fulfillment automation
- Secure webhook handling with signature verification
- Basic shipping label generation and tracking
- User authentication and data security (RLS policies)
- Payment processing and subscription management
- Mobile-responsive UI for creator dashboard

### **Should Have (S)** - Important, High-Priority Features  
- Advanced analytics and performance metrics
- Multi-carrier shipping integration
- Automated email notifications and alerts
- Inventory synchronization across platforms
- Customer support chat integration
- Advanced order filtering and search

### **Could Have (C)** - Nice-to-Have Features
- AI-powered order forecasting
- Advanced reporting and business intelligence
- Multi-language support for international creators
- Custom branding and white-label options
- Advanced workflow automation rules
- Third-party app integrations

### **Won't Have (W)** - Explicitly Out of Scope
- Full e-commerce platform functionality (shopping cart, checkout)
- Social media content creation tools
- Accounting and tax preparation features
- Customer service chatbots for end customers
- Physical product sourcing or manufacturing
- Competitor analysis tools

### **Documentation MoSCoW Application**
- **Planning documents**: Include MoSCoW breakdown for all features
- **Specifications**: Prioritize requirements using MoSCoW categories  
- **Implementation**: Focus on Must Have → Should Have → Could Have sequence
- **Reports**: Track completion by MoSCoW priority levels

## API Integration Priorities (MoSCoW)

### **Must Have (M)**: TikTok Shop Product, Order, Fulfillment, Authorization, Events APIs
### **Should Have (S)**: Return & Refund, Logistics, Financial APIs
### **Could Have (C)**: Promotion, Seller, Data Reconciliation APIs
### **Won't Have (W)**: Supply Chain API (enterprise features)

## **CreatorFlow-Specific Guidelines**

- **TikTok Shop Integration**: Always test webhook handling and API rate limits
- **Order Processing**: Ensure proper error handling for high-volume scenarios
- **Shipping Integration**: Test with multiple carriers and edge cases
- **Analytics**: Validate data accuracy and real-time updates
- **Security**: Implement proper webhook signature verification
- **MoSCoW Prioritization**: Apply to all feature development and documentation

## **Documentation Approval Flow**

1. **Start**: Create `DRAFT_` prefixed files in proper `docs/` location
2. **Progress**: Update drafts with implementation progress
3. **User Testing**: User validates functionality
4. **Approval**: User removes `DRAFT-` prefix after validation

## Testing Strategy

### Unit Tests (Jest)
- Focus on **business logic** and utility functions
- Mock external dependencies (Supabase, TikTok API, Stripe)
- Test **edge cases** and error scenarios
- Maintain **>80% coverage** for critical paths

### E2E Tests (Playwright)
- Test **complete user journeys** (auth, order processing, fulfillment)
- Validate **webhook handling** and real-time updates
- Test **high-volume scenarios** (500+ orders/day)

### Testing Rules
- **See**: `tests/Q_TESTING_RULES.md` for detailed testing guidelines
- **Mock Strategy**: Always mock external APIs in unit tests
- **Test Data**: Use factories for consistent test data generation
- **Assertions**: Prefer specific assertions over generic ones

## Key Commands

```bash
# Development
bun run dev              # Start development server
bun run type-check       # TypeScript checking
bun run lint            # ESLint checking

# Testing
bun test                # Unit tests
bun run test:e2e        # E2E tests

# Database
bun run generate-types  # Generate Supabase types
bun run migration:up    # Run migrations
```

## Environment Variables

```bash
# TikTok Shop API
TIKTOK_SHOP_APP_KEY=your_app_key_here
TIKTOK_SHOP_APP_SECRET=your_app_secret_here
TIKTOK_SHOP_WEBHOOK_SECRET=your_webhook_secret_here

# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# Stripe
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_key
STRIPE_SECRET_KEY=sk_test_your_key
STRIPE_WEBHOOK_SECRET=whsec_your_secret

# Email & Analytics
RESEND_API_KEY=re_your_key
NEXT_PUBLIC_POSTHOG_KEY=your_posthog_key
```

## Success Metrics

- **Order Processing**: 500+ orders/day capacity
- **Sync Latency**: <30 seconds for order sync
- **Uptime**: 99.9% API availability
- **Onboarding**: <2 minutes creator setup time
- **TypeScript Errors**: 0 compilation errors maintained

---

*This file guides Amazon Q Developer to maintain CreatorFlow's standards and business objectives while ensuring scalable, maintainable code that serves TikTok Shop creators effectively.*
